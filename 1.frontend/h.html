<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediSync Dashboard</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        /* --- Root Variables --- */
        :root {
            --clr-primary: #7380ec; --clr-danger: #ff7782; --clr-success: #4caf50;
            --clr-warning: #ffbb33; --clr-white: #fff; --clr-info-dark: #7d8da1;
            --clr-info-light: #dce1eb; --clr-dark: #363949; --clr-light: rgba(132, 139, 200, 0.18);
            --clr-primary-variant: #111e88; --clr-dark-variant: #677483; --clr-background: #f6f6f9;
            --card-border-radius: 2rem; --border-radius-1: 0.4rem; --border-radius-2: 0.8rem;
            --card-padding: 1.8rem; --padding-1: 1.2rem; --box-shadow: 0 2rem 3rem var(--clr-light);

        }
        .dark-theme-variables {
            --clr-background: #181a1e; --clr-white: #202528; --clr-dark: #edeffd;
            --clr-dark-variant: #a3bdcc; --clr-light: rgba(0, 0, 0, 0.4);
            --box-shadow: 0 2rem 3rem var(--clr-light);
        }
        /* --- General Styles --- */
        * { margin: 0; padding: 0; outline: 0; appearance: none; border: 0; text-decoration: none; list-style: none; box-sizing: border-box; }
        html { font-size: 14px; }
        body { width: 100vw; height: 100vh; font-family: 'Poppins', sans-serif; font-size: 0.88rem; background: var(--clr-background); user-select: none; overflow-x: hidden; color: var(--clr-dark); }
        .container { display: grid; width: 96%; margin: 0 auto; gap: 1.8rem; grid-template-columns: 14rem auto 23rem; transition: grid-template-columns 300ms ease; }
        
        /* Layout switch for full-width content */
        .container.full-width-content { grid-template-columns: 14rem 1fr; }
        .container.full-width-content .right { display: none; }

        a { color: var(--clr-dark); }
        img { display: block; width: 100%; }
        h1 { font-weight: 800; font-size: 1.8rem; }
        h2 { font-size: 1.4rem; }
        h3 { font-size: 0.87rem; }
        .text-muted { color: var(--clr-info-dark); }
        .danger { color: var(--clr-danger); }
        aside { height: 100vh; }
        aside .top { display: flex; align-items: center; justify-content: space-between; margin-top: 1.4rem; }
        aside .logo { display: flex; gap: 0.5rem; }
        aside .close { display: none; }
        aside .sidebar { display: flex; flex-direction: column; height: 86vh; position: relative; top: 3rem; }
        aside .sidebar a { display: flex; color: var(--clr-info-dark); margin-left: 2rem; gap: 1rem; align-items: center; position: relative; height: 3.7rem; transition: all 300ms ease; }
        aside .sidebar a:last-child { position: absolute; bottom: 2rem; width: 100%; }
        aside .sidebar a.active { background: var(--clr-light); color: var(--clr-primary); margin-left: 0; }
        aside .sidebar a.active::before { content: ''; width: 6px; height: 100%; background: var(--clr-primary); }
        aside .sidebar a.active span { color: var(--clr-primary); margin-left: calc(1rem - 3px); }
        main { margin-top: 1.4rem; }
        main .date { display: inline-block; background: var(--clr-light); border-radius: var(--border-radius-1); margin-top: 1rem; padding: 0.5rem 1.6rem; }
        main .insights { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.6rem; }
        main .insights > div { background: var(--clr-white); padding: var(--card-padding); border-radius: var(--card-border-radius); margin-top: 1rem; box-shadow: var(--box-shadow); }
        main .recent-patients { margin-top: 2rem; }
        main .recent-patients table { background: var(--clr-white); width: 100%; border-radius: var(--card-border-radius); padding: var(--card-padding); text-align: center; box-shadow: var(--box-shadow); }
        main table tbody td { height: 2.8rem; border-bottom: 1px solid var(--clr-light); color: var(--clr-dark-variant); }
        main table tbody tr:last-child td { border: none; }
        .right { margin-top: 1.4rem; }
        .right .top { display: flex; justify-content: end; gap: 2rem; }
        .right .top button { display: none; }
        .right .theme-toggler { background: var(--clr-light); display: flex; justify-content: space-between; align-items: center; height: 1.6rem; width: 4.2rem; cursor: pointer; border-radius: var(--border-radius-1); }
        .right .theme-toggler span { font-size: 1.2rem; width: 50%; height: 100%; display: flex; align-items: center; justify-content: center; }
        .right .theme-toggler span.active { background: var(--clr-primary); color: white; border-radius: var(--border-radius-1); }
        .right .top .profile { display: flex; gap: 2rem; text-align: right; }
        .profile-photo { width: 2.8rem; height: 2.8rem; border-radius: 50%; overflow: hidden; }
        .right .recent-appointments { margin-top: 1rem; }
        .right .recent-appointments h2 { margin-bottom: 0.8rem; }
        .right .recent-appointments .updates { background: var(--clr-white); padding: var(--card-padding); border-radius: var(--card-border-radius); box-shadow: var(--box-shadow); }
        .right .recent-appointments .update { display: grid; grid-template-columns: 2.6rem auto; gap: 1rem; margin-bottom: 1rem; }
        main .loader { text-align: center; padding: 5rem; font-size: 1.5rem; color: var(--clr-info-dark); }
        
        /* --- Logout Modal Styling --- */
        .modal-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.6); display: flex; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; z-index: 2000; }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content { background: var(--clr-white); color: var(--clr-dark); padding: 2.5rem; border-radius: 1rem; width: 90%; max-width: 400px; text-align: center; box-shadow: 0 5px 20px rgba(0,0,0,0.2); transform: scale(0.9); transition: transform 0.3s ease; }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-content h2 { font-size: 1.5rem; margin-bottom: 0.5rem; }
        .modal-content p { color: var(--clr-dark-variant); margin-bottom: 2rem; }
        .modal-actions { display: flex; gap: 1rem; justify-content: center; }
        .modal-btn { padding: 0.7rem 1.5rem; border: none; border-radius: 0.5rem; font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.3s ease; }
        #confirm-logout-btn { background-color: var(--clr-danger); color: #fff; }
        #cancel-logout-btn { background-color: var(--clr-white); color: var(--clr-info-dark); border: 1px solid var(--clr-info-light); }
    </style>
</head>
<body>
    <div class="container">
        <aside>
            <div class="top">
                <div class="logo"><h2>Medi<span class="danger">Sync</span></h2></div>
                <div class="close" id="close-btn"><span class="material-symbols-outlined">close</span></div>
            </div>
            <div class="sidebar">
                <a href="dashboard.html" class="active-link"><span class="material-symbols-outlined">dashboard</span><h3>Dashboard</h3></a>
                <a href="patient.html"><span class="material-symbols-outlined">group</span><h3>Patients</h3></a>
                <a href="doctor.html"><span class="material-symbols-outlined">stethoscope</span><h3>Doctors</h3></a>
                <a href="#" id="logout-link"><span class="material-symbols-outlined">logout</span><h3>Logout</h3></a>
            </div>
        </aside>
        
        <main id="main-content"></main>

        <div class="right">
            <div class="top">
                <button id="menu-btn"><span class="material-symbols-outlined">menu</span></button>
                <div class="theme-toggler">
                    <span class="material-symbols-outlined active">light_mode</span>
                    <span class="material-symbols-outlined">dark_mode</span>
                </div>
                <div class="profile">
                    <div class="info">
                        <p>Hey, <b>Venkatesh</b></p>
                        <small class="text-muted">Admin</small>
                    </div>
                    <div class="profile-photo"><img src="https://i.pravatar.cc/150" alt="Profile Photo"></div>
                </div>
            </div>
            <div class="recent-appointments">
                <h2>Recent Appointments</h2>
                <div class="updates">
                    <div class="update">
                        <div class="profile-photo"><img src="https://i.pravatar.cc/150?u=patient1"></div>
                        <div class="message"><p><b>Emily Davis</b> with Dr. Michael Williams.</p><small class="text-muted">10:00 AM</small></div>
                    </div>
                    <div class="update">
                        <div class="profile-photo"><img src="https://i.pravatar.cc/150?u=patient2"></div>
                        <div class="message"><p><b>David Brown</b> with Dr. Emily Davis.</p><small class="text-muted">11:30 AM</small></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="logout-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Confirm Logout</h2>
            <p>Are you sure you want to log out, Venkatesh?</p>
            <div class="modal-actions">
                <button id="cancel-logout-btn" class="modal-btn">Cancel</button>
                <button id="confirm-logout-btn" class="modal-btn">Yes, Logout</button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const container = document.querySelector('.container');
    const sideMenu = document.querySelector("aside");
    const menuBtn = document.getElementById("menu-btn");
    const closeBtn = document.getElementById("close-btn");
    const themeToggler = document.querySelector(".theme-toggler");
    const mainContent = document.getElementById('main-content');
    const sidebarLinks = document.querySelectorAll('.sidebar a');

    if(menuBtn) menuBtn.addEventListener('click', () => sideMenu.style.display = 'block');
    if(closeBtn) closeBtn.addEventListener('click', () => sideMenu.style.display = 'none');
    if(themeToggler) themeToggler.addEventListener('click', () => {
        document.body.classList.toggle('dark-theme-variables');
        themeToggler.querySelector('span:nth-child(1)').classList.toggle('active');
        themeToggler.querySelector('span:nth-child(2)').classList.toggle('active');
    });

    function updateDashboardMetrics() {
        const datePicker = document.getElementById("date-picker");
        if (!datePicker) return;
        datePicker.value = new Date().toISOString().split('T')[0];
        const daysSinceEpoch = Math.floor(new Date().getTime() / 86400000);
        document.getElementById('total-patients').textContent = 100 + (daysSinceEpoch % 15);
        document.getElementById('total-doctors').textContent = 50 + (Math.floor(daysSinceEpoch / 7) % 4);
        document.getElementById('total-appointments').textContent = 200 + ((daysSinceEpoch * 2) % 25);
    }

    const loadContent = (url) => {
        mainContent.innerHTML = '<h1 class="loader">Loading...</h1>';
        fetch(url)
            .then(response => { if (!response.ok) throw new Error(`Page not found`); return response.text(); })
            .then(html => {
                mainContent.innerHTML = html;
                if (url.includes('home.html')) {
                    container.classList.remove('full-width-content');
                    updateDashboardMetrics();
                } else {
                    container.classList.add('full-width-content');
                }
            })
            .catch(error => mainContent.innerHTML = `<p style="color:red;text-align:center;">Error: ${error.message}</p>`);
    };

    sidebarLinks.forEach(link => {
        link.addEventListener('click', (event) => {
            event.preventDefault();
            if (link.id === 'logout-link') return;
            loadContent(link.getAttribute('href'));
            sidebarLinks.forEach(l => l.classList.remove('active'));
            link.classList.add('active');
        });
    });

    const logoutLink = document.getElementById('logout-link');
    const logoutModal = document.getElementById('logout-modal');
    const confirmLogoutBtn = document.getElementById('confirm-logout-btn');
    const cancelLogoutBtn = document.getElementById('cancel-logout-btn');
    const hideLogoutModal = () => logoutModal.classList.remove('visible');

    logoutLink.addEventListener('click', (e) => { e.preventDefault(); logoutModal.classList.add('visible'); });
    cancelLogoutBtn.addEventListener('click', hideLogoutModal);
    logoutModal.addEventListener('click', (e) => { if (e.target === logoutModal) hideLogoutModal(); });
    confirmLogoutBtn.addEventListener('click', () => {
        logoutModal.querySelector('.modal-content').innerHTML = '<h2>Logging Out...</h2><p>Redirecting you shortly.</p>';
        setTimeout(() => { window.location.href = 'login.html'; }, 1500);
    });

    loadContent('content/home.html');
});
</script>
</body>
</html>